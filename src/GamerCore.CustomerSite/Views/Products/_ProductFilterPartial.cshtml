@model ProductFilterViewModel

<div id="filterPanel" class="accordion accordion-flush">
  <!-- Categories filter -->
  <div class="accordion-item">
    <h2 class="accordion-header">
      <button class="accordion-button" type="button"
              data-bs-toggle="collapse" data-bs-target="#categoryFilter"
              aria-expanded="true" aria-controls="categoryFilter">
        Categories
      </button>
    </h2>
    <div id="categoryFilter" class="accordion-collapse collapse show">
      <div class="accordion-body p-3">
        <div class="list-group list-group-flush">
          <!-- All categories option -->
          <a href="@Url.Action("Index", "Products", new { page = 1 })"
             class="list-group-item list-group-item-action d-flex justify-content-between align-items-center @(Model.SelectedCategoryId == null ? "active" : "")">
            All Categories
            <span class="badge bg-primary rounded-pill">@Model.Categories.Sum(c => c.ProductCount)</span>
          </a>

          <!-- Individual categories -->
          @foreach (var category in Model.Categories)
          {
            var isActive = Model.SelectedCategoryId == category.CategoryId;
            <a href="@Url.Action("Index", "Products", new { page = 1, categoryId = category.CategoryId })"
               class="list-group-item list-group-item-action d-flex justify-content-between align-items-center @(isActive ? "active" : "")">
              @category.Name
              <span class="badge bg-primary rounded-pill">@category.ProductCount</span>
            </a>
          }
        </div>
      </div>
    </div>
  </div>

  <!-- Price range filter -->
  <div class="accordion-item">
    <h2 class="accordion-header">
      <button class="accordion-button collapsed" type="button"
              data-bs-toggle="collapse" data-bs-target="#priceFilter"
              aria-expanded="false" aria-controls="priceFilter">
        Price
      </button>
    </h2>
    <div id="priceFilter" class="accordion-collapse collapse">
      <div class="accordion-body p-3">
        <div class="range-slider">
          <input type="range" class="form-range" min="0" max="1000" step="10" id="priceRangeMin">
          <input type="range" class="form-range" min="0" max="1000" step="10" id="priceRangeMax">
        </div>
        <div class="d-flex justify-content-between align-items-center mt-2">
          <div class="input-group input-group-sm">
            <span class="input-group-text">$</span>
            <input type="number" class="form-control" id="minPrice" placeholder="Min">
          </div>
          <span class="mx-2">-</span>
          <div class="input-group input-group-sm">
            <span class="input-group-text">$</span>
            <input type="number" class="form-control" id="maxPrice" placeholder="Max">
          </div>
        </div>
        <button class="btn btn-sm btn-primary w-100 mt-3">Apply</button>
      </div>
    </div>
  </div>

  <!-- Ratings filter -->
  <div class="accordion-item">
    <h2 class="accordion-header">
      <button class="accordion-button collapsed" type="button"
              data-bs-toggle="collapse" data-bs-target="#ratingFilter"
              aria-expanded="false" aria-controls="ratingFilter">
        Ratings
      </button>
    </h2>
    <div id="ratingFilter" class="accordion-collapse collapse">
      <div class="accordion-body p-3">
        <div class="form-check mb-2">
          <input class="form-check-input" type="checkbox" id="rating5">
          <label class="form-check-label d-flex align-items-center" for="rating5">
            <div class="me-2">
              <i class="bi bi-star-fill text-warning"></i>
              <i class="bi bi-star-fill text-warning"></i>
              <i class="bi bi-star-fill text-warning"></i>
              <i class="bi bi-star-fill text-warning"></i>
              <i class="bi bi-star-fill text-warning"></i>
            </div>
            <small>& Up</small>
          </label>
        </div>
        <div class="form-check mb-2">
          <input class="form-check-input" type="checkbox" id="rating4">
          <label class="form-check-label d-flex align-items-center" for="rating4">
            <div class="me-2">
              <i class="bi bi-star-fill text-warning"></i>
              <i class="bi bi-star-fill text-warning"></i>
              <i class="bi bi-star-fill text-warning"></i>
              <i class="bi bi-star-fill text-warning"></i>
              <i class="bi bi-star text-warning"></i>
            </div>
            <small>& Up</small>
          </label>
        </div>
        <div class="form-check mb-2">
          <input class="form-check-input" type="checkbox" id="rating3">
          <label class="form-check-label d-flex align-items-center" for="rating3">
            <div class="me-2">
              <i class="bi bi-star-fill text-warning"></i>
              <i class="bi bi-star-fill text-warning"></i>
              <i class="bi bi-star-fill text-warning"></i>
              <i class="bi bi-star text-warning"></i>
              <i class="bi bi-star text-warning"></i>
            </div>
            <small>& Up</small>
          </label>
        </div>
        <div class="form-check mb-2">
          <input class="form-check-input" type="checkbox" id="rating2">
          <label class="form-check-label d-flex align-items-center" for="rating2">
            <div class="me-2">
              <i class="bi bi-star-fill text-warning"></i>
              <i class="bi bi-star-fill text-warning"></i>
              <i class="bi bi-star text-warning"></i>
              <i class="bi bi-star text-warning"></i>
              <i class="bi bi-star text-warning"></i>
            </div>
            <small>& Up</small>
          </label>
        </div>
        <div class="form-check">
          <input class="form-check-input" type="checkbox" id="rating1">
          <label class="form-check-label d-flex align-items-center" for="rating1">
            <div class="me-2">
              <i class="bi bi-star-fill text-warning"></i>
              <i class="bi bi-star text-warning"></i>
              <i class="bi bi-star text-warning"></i>
              <i class="bi bi-star text-warning"></i>
              <i class="bi bi-star text-warning"></i>
            </div>
            <small>& Up</small>
          </label>
        </div>
      </div>
    </div>
  </div>

  <!-- More filter options can be added here -->

  <!-- Clear all filters button -->
  <div class="p-3 border-top">
    <a href="@Url.Action("Index", "Products")" class="btn btn-outline-secondary w-100">
      <i class="bi bi-x-circle me-1"></i> Clear All Filters
    </a>
  </div>
</div>

@* OLD
<div id="filterPanel" class="accordion">
  <div class="accordion-item">
    <h2 class="accordion-header">
      <button class="accordion-button" type="button"
              data-bs-toggle="collapse" data-bs-target="#categoryFilter"
              aria-expanded="false" aria-controls="categoryFilter">
        Catagories
      </button>
    </h2>
    <!-- TODO: Maintain the accordion open/close state and not depending on the links -->
    <div id="categoryFilter" class="accordion-collapse collapse @(Model.SelectedCategoryId != null ? "show" : "")">
      <div class="accordion-body">
        <div class="btn-group-vertical w-100" role="group" aria-label="Category Filter">
          <!-- "All" button -->
          <a class="btn @(Model.SelectedCategoryId == null ? "btn-primary" : "btn-outline-primary")"
             asp-controller="Products" asp-action="Index"
             asp-route-page="1">
            All Categories
          </a>

          @foreach (var category in Model.Categories)
          {
            var isActive = Model.SelectedCategoryId == category.CategoryId;

            <a class="btn @(isActive ? "btn-primary" : "btn-outline-primary")"
               asp-controller="Products" asp-action="Index"
               asp-route-page="1" asp-route-categoryId="@category.CategoryId">
              @category.Name
            </a>
          }
        </div>
      </div>
    </div>
  </div>
</div>
*@